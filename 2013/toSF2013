#! /bin/bash

## This script uploads the web pages from this sandbox to the public web-site.
## This action will make the current content live - please doublecheck changes
## before upload!
## The public web site is at http://smtcomp.sourceforge.net/
## This script only does pages for a single year ($year)!!!

## The script takes a single argument - the sourceforge username
## The value of that argument will default to the value of $SOURCEFORGE_USERNAME

## You will need to enter your sourceforge password at the prompt

## NOTE: This script should copy all the web files; for some reason the
## recursive copying did not work, so each subdirectory is explicitly listed.
## NOTE ALSO: Files deleted in the source set are not deleted from the web

username=$1
year=2013
if [ "$username" == "" ]; then username=$SOURCEFORGE_USERNAME ; fi
if [ "$username" == "" ]; then echo Specify your sourceforge username either on the command line or by setting the environment variable SOURCEFORGE_USERNAME ; exit 1; fi


cd `dirname $0`/..


sftp $username,smtcomp@web.sourceforge.net  << HERE
put [a-z]* htdocs
mkdir htdocs/$year
cd htdocs/$year
lcd $year
put * .
cd reports
rm toSF2013
cd ..
rmdir reports
cd report
lcd report
put * .
rm toSF2013
cd ../data
lcd ../data
put * .
rm toSF2013
exit
HERE



